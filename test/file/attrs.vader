" vim:ft=vim
" Test basic attribute getting and setting

Before;
let file_ = object#file_()
let files = map(range(5), 'tempname()')
call map(copy(files), 'writefile([], v:val)')

Execute(file object looks fine);
Log object#dir(file_)
Log object#repr(file_)

"
" Initial attributes right after open()'ed
"

Execute(open() without mode default for reading);
let f = object#open(files[0])
AssertEqual f.mode, 'r'
AssertEqual files[0], f.name
Assert !f.closed
Log object#repr(f)

Execute(open() with mode string should create file with that mode);
let modes = [ 'r', 'w', 'a', 'r+', 'rw' ]
Assert len(modes) <= len(files)

for x in range(len(files))
  let f = object#open(files[x], modes[x])
  AssertEqual f.name, files[x]
  AssertEqual f.mode, modes[x]
  Assert !f.closed
  Log object#repr(f)
endfor

After;
call map(files, 'delete(v:val)')
